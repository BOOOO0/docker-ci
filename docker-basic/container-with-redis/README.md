# 레디스를 이용한 컨테이너 이해

## redis

- 레디스는 주 메모리를 사용하는(인메모리 데이터베이스) 키-값을 사용하는 비관계형 DBMS입니다. 보조 기억 장치를 사용하는 다른 관계형, 문서형 DBMS보다 가볍고 속도가 빠른 장점이 있습니다.

## 도커 환경에서 레디스 사용하기

- 윈도우 환경에서 일반적으로 레디스를 사용하는 방법은 윈도우 서비스에서 레디스가 실행중인 것을 확인한 후 셸에서 `redis-cli` 명령어로 레디스 클라이언트를 실행시키는 것입니다.

- 컨테이너 환경에 더 이해하기 위해서 윈도우 서비스에서 레디스를 중지시키고 `docker run redis`명령어로 도커 환경에서 레디스 서버를 실행시키겠습니다.

- 레디스 서버가 실행이 된 상태지만 `redis-cli`명령어를 실행시켜도 레디스 클라이언트는 실행되지 않습니다. 그 이유는 현재 레디스 서버는 도커 환경에서 컨테이너 내부에서 실행중이기 때문에 윈도우 셸에서 레디스 클라이언트는 컨테이너 안에 있는 레디스 서버에 접근하지 못하는 것입니다.

- 그러므로 여기서 이전에 숙지한 `docker exec`명령어를 사용해야 합니다. `docker exec -it [컨테이너 ID] redis-cli` 명령어를 사용하면 컨테이너 내부의 레디스 서버에 접근해 레디스 클라이언트를 실행시킬 수 있습니다. 이때 레디스 클라이언트도 컨테이너 안에서 실행이 되는 것입니다.

## -it

- `-it`옵션은 `-i, --interactive` 옵션과 `-t, --tty`옵션을 합친 것으로 `-i`옵션은 STDIN을 활성화 시켜서 명령어 실행 후 입력이 가능하게 해주고 `-t`옵션은 셸에 tty 모드를 활성화 시켜서 입력창을 보여주는 것입니다. 이 둘을 합쳐서 컨테이너 내부에서 실행되는 레디스 클라이언트에 입력을 할 수 있는 상태가 되는 것입니다.

- `-it`옵션 없이 `docker exec [컨테이너 ID] redis-cli`명령어를 실행시킨다면 레디스 클라이언트에 입력을 전달할 수 없고 기존 셸에 머무릅니다.

## redis 실행 확인

- 레디스 클라이언트까지 실행이 잘 되었다면 `set key1 hello`로 key1에 hello라는 값을 할당해줍니다.

- `get key1` 명령어를 입력하면 "hello"라는 값이 잘 출력되는 것을 확인할 수 있습니다.
