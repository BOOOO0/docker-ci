# 도커 이미지 생성 순서

- 컨테이너가 생성되면 어떻게 작동되어야 하는지 정의하는 Dockerfile을 작성합니다.

- 도커 파일에 입력된 내용을 도커 클라이언트에 전달하면 클라이언트는 도커 서버로 전달합니다.

## 도커 파일

- 도커 파일을 만들 때 가장 먼저 베이스 이미지(OS)를 명시해줍니다. 그리고 베이스 이미지 외 추가적으로 필요한 파일을 다운 받기 위한 몇가지 명령어를 명시해줍니다.

- 마지막으로 컨테이너가 시작될 때 실행 될 명령어를 명시해줍니다.

- `FROM`에는 베이스 이미지(OS)를 명시해줍니다. 이미지 이름 뒤에 태그를 명시하지 않으면 최신 버전의 이미지가 설치가 되며 버전을 명시하려면 `[이미지 이름]:[태그]`의 형식으로 작성할 수 있습니다.

- `RUN`에는 도커 이미지가 생성되기 전에 수행해야 할 셸 커맨드를 작성합니다. 주로 필요한 파일을 다운로드 받는 커맨드를 작성합니다.

- `CMD`에는 도커 컨테이너가 실행되었을 때 실행할 파일 혹은 셸 스크립트를 명시해줍니다. 주로 어플리케이션 자체의 실행에 대한 명령을 작성합니다.

## 도커 빌드

- 도커 파일에 입력된 내용을 도커 서버가 인식할 수 있게 하기 위해서는 `docker build [이미지 이름] [디렉토리 경로]`의 실행이 필요합니다.

- 도커 빌드 명령어는 디렉토리 내에서 Dockerfile이라는 파일명을 가진 파일을 찾아서 도커 클라이언트에 전달합니다.

- `-t` 혹은 `--tag` 태그 옵션을 사용해서 작성자, 프로젝트이름, 태그(버전)를 이미지에 명시할 수 있습니다. `docker build -t [사용자 이름]/[이미지 이름]:[태그(버전)] [경로]`

- 빌드로 이미지를 생성시켰다면 해당 이미지를 가지고 컨테이너를 실행시킬 수 있습니다.
