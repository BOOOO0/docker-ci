# 리액트 앱 CI/CD 구축

- 리액트 라이브러리를 사용한 앱을 이미지로 빌드하고 배포합니다.

- 리액트 앱을 생성할 때 설치된 node_modules는 이미지를 빌드할 때 설치되는 컨테이너 내부의 node_modules와 중복이 되므로 로컬에 존재하는 node_modules를 삭제합니다.

## 도커 파일의 분할

- 용도에 따라 서로 다른 도커 파일을 여러개 작성해서 사용할 수 있습니다. 예를들어 개발 단계에서 사용할 도커 파일을 작성하고 최종 배포를 하기 위해 사용할 도커 파일을 하나 더 작성할 수 있습니다.

## Dockerfile.dev 빌드

- `docker build` 명령어는 파일명이 Dockerfile인 기본 도커 파일을 찾아서 빌드합니다. 용도에 맞게 파일명을 변경한 도커 파일을 사용해서 이미지를 빌드하려면 도커 빌드의 `-f`옵션을 사용해서 사용할 도커 파일을 명시해줘야 합니다. 사용법은 다음과 같습니다. `docker build -f [사용할 도커 파일명] [경로]`

## node:alpine

- alpine 리눅스 이미지를 베이스로 하는 node.js 이미지 중 하나입니다. alpine 이미지는 리눅스 배포판 이미지 중 가장 용량이 작습니다.

## 테스트를 위한 컨테이너 생성

- 도커 컴포즈 파일에 테스트를 위한 컨테이너를 명시하고 테스트를 위한 명령어를 CMD로 전달하면 앱의 테스트를 진행할 수 있습니다.

- 두 컨테이너의 실행에 대한 출력은 테스트의 출력 결과와 리액트 앱을 포어그라운드로 실행했을 때의 출력이 모두 출력됩니다.

- ![image](../docker-basic/img/test_container.JPG)
